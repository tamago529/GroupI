{% extends "customer_base.html" %}
{% block content %}

<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>レストラン情報登録（入力フォーム）</title>
  <style>
    :root{
      --bg:#f6f6f6;
      --card:#fff;
      --line:#e6e0d7;
      --head:#f2efe9;
      --soft:#faf8f4;
      --text:#333;
      --sub:#666;
      --link:#1a73e8;
      --brand:#d86b00;
      --green:#6fbf2f;
      --green2:#4ea318;
      --warn:#c8342a;
      --warnbg:#fde8e8;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:"Hiragino Kaku Gothic ProN","Meiryo",system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      background:var(--bg);
      color:var(--text);
    }
    .wrap{max-width:980px;margin:0 auto;padding:16px 16px 44px;}
    .breadcrumb{font-size:12px;color:#777;margin:10px 0 12px;}
    .breadcrumb a{color:#777;text-decoration:none}
    .breadcrumb a:hover{text-decoration:underline}
    .page-title{background:var(--card);border:1px solid var(--line);padding:14px 16px;font-size:18px;font-weight:900;}
    .desc{background:var(--card);border:1px solid var(--line);border-top:none;padding:12px 16px;font-size:12px;color:#444;line-height:1.7;}

    .section{margin-top:14px;background:var(--card);border:1px solid var(--line);}
    .section-head{padding:10px 14px;background:var(--head);border-bottom:1px solid var(--line);font-weight:900;font-size:13px;display:flex;align-items:center;gap:8px;}
    .caret{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:7px solid #333;transform:translateY(1px);}

    .row{display:grid;grid-template-columns:220px 1fr;border-bottom:1px solid var(--line);}
    .row:last-child{border-bottom:none}
    .label{background:var(--soft);padding:12px;font-size:12px;font-weight:900;display:flex;align-items:center;gap:8px;}
    .value{padding:10px 12px;display:flex;align-items:center;gap:10px;flex-wrap:wrap;}
    .req{display:inline-flex;align-items:center;justify-content:center;padding:2px 6px;border-radius:3px;background:var(--warn);color:#fff;font-size:11px;font-weight:900;margin-left:6px;}
    .hint{width:100%;font-size:12px;color:var(--sub);line-height:1.6;}

    input[type="text"],input[type="number"],input[type="email"],textarea,select{
      border:1px solid #d7d2c9;border-radius:4px;padding:9px 10px;font-size:13px;background:#fff;outline:none;
      min-width:180px;flex:1 1 240px;
    }
    input:focus,select:focus,textarea:focus{border-color:#9aa7b5;box-shadow:0 0 0 2px rgba(26,115,232,.12);}
    textarea{width:100%;min-height:90px;resize:vertical;flex:1 1 100%;}
    .w-s{flex:1 1 160px;min-width:160px;}
    .w-m{flex:1 1 240px;min-width:240px;}
    .w-l{flex:1 1 420px;min-width:260px;}

    .notice{margin-top:12px;padding:10px 12px;border:1px solid #f2b8b8;background:var(--warnbg);color:var(--warn);font-size:12px;line-height:1.6;}
    .actions{margin-top:14px;background:var(--card);border:1px solid var(--line);padding:14px;display:flex;justify-content:center;gap:12px;flex-wrap:wrap;}
    .btn{min-width:220px;height:44px;border-radius:4px;border:1px solid #cfc8bd;background:#fff;font-weight:900;cursor:pointer;font-size:13px;}
    .btn:hover{background:#f3f3f3}
    .btn-green{border:none;background:var(--green);color:#fff;}
    .btn-green:hover{background:var(--green2)}

    @media (max-width:860px){
      .row{grid-template-columns:1fr}
      .label{border-bottom:1px solid var(--line)}
      input,select{flex-basis:100%;}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="breadcrumb">
      <a href="#">タベッチ</a> ＞ <a href="#">店舗会員</a> ＞ レストラン情報登録（入力）
    </div>

    <div class="page-title">レストラン情報登録（レストラン情報入力）</div>
    <div class="desc">
      レストランの基本情報を入力してください。<br>
      「必須」の項目は必ず入力してください。
    </div>

    {% if messages %}
      <div style="margin-top:12px;">
        {% for message in messages %}
          <div style="border:1px solid #e6e0d7;background:#fff;padding:10px 12px;margin-bottom:8px;font-size:12px;font-weight:900;">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <form action="{% url 'reservations:store_restaurant_info_register' store.id %}" method="post">
      {% csrf_token %}

      <!-- 基本情報 -->
      <div class="section">
        <div class="section-head"><span class="caret"></span>基本情報入力</div>

        <div class="row">
          <div class="label">店名 <span class="req">必須</span></div>
          <div class="value">
            <input class="w-l" type="text" name="store_name" value="{{ store.store_name }}">
            <div class="hint">例：〇〇食堂 / THE PUBLIC COFFEE</div>
          </div>
        </div>

        <div class="row">
          <div class="label">支店名（枝番）</div>
          <div class="value">
            <input class="w-l" type="text" name="branch_name" value="{{ store.branch_name }}">
          </div>
        </div>
      </div>

      <!-- 所在地 -->
      <div class="section">
        <div class="section-head"><span class="caret"></span>所在地入力</div>

        <div class="row">
          <div class="label">エリア <span class="req">必須</span></div>
          <div class="value">
            <select class="w-m" name="area_id" required>
              <option value="">選択してください</option>
              {% for a in areas %}
                <option value="{{ a.id }}" {% if store.area_id == a.id %}selected{% endif %}>{{ a.area_name }}</option>
              {% endfor %}
            </select>
          </div>
        </div>

        <div class="row">
          <div class="label">住所 <span class="req">必須</span></div>
          <div class="value">
            <input class="w-l" type="text" name="address" value="{{ store.address }}">
          </div>
        </div>

        <div class="row">
          <div class="label">地図（URL/埋め込み等）</div>
          <div class="value">
            <input class="w-l" type="text" name="map_location" value="{{ store.map_location }}">
            <div class="hint">GoogleマップURL等を保存（Store.map_location）</div>
          </div>
        </div>
      </div>

      <!-- 連絡先 -->
      <div class="section">
        <div class="section-head"><span class="caret"></span>連絡先</div>

        <div class="row">
          <div class="label">電話番号 <span class="req">必須</span></div>
          <div class="value">
            <input class="w-m" type="text" name="phone_number" value="{{ store.phone_number }}">
          </div>
        </div>

        <div class="row">
          <div class="label">メールアドレス</div>
          <div class="value">
            <input class="w-l" type="email" name="email" value="{{ store.email }}">
          </div>
        </div>
      </div>

      <!-- 営業情報 -->
      <div class="section">
        <div class="section-head"><span class="caret"></span>営業情報</div>

        <div class="row">
          <div class="label">営業時間</div>
          <div class="value">
            <textarea name="business_hours">{{ store.business_hours }}</textarea>
          </div>
        </div>

        <div class="row">
          <div class="label">利用シーン <span class="req">必須</span></div>
          <div class="value">
            <select class="w-m" name="scene_id" required>
              <option value="">選択してください</option>
              {% for s in scenes %}
                <option value="{{ s.id }}" {% if store.scene_id == s.id %}selected{% endif %}>{{ s.scene_name }}</option>
              {% endfor %}
            </select>
          </div>
        </div>

        <div class="row">
          <div class="label">予算（目安）</div>
          <div class="value">
            <input class="w-s" type="number" name="budget" value="{{ store.budget }}" min="0">
          </div>
        </div>
      </div>

      <!-- 席・設備 -->
      <div class="section">
        <div class="section-head"><span class="caret"></span>席・設備</div>

        <div class="row">
          <div class="label">席数</div>
          <div class="value">
            <input class="w-s" type="number" name="seats" value="{{ store.seats }}" min="0">
          </div>
        </div>

        <div class="row">
          <div class="label">予約可否</div>
          <div class="value">
            <label><input type="radio" name="reservable" value="1" {% if store.reservable %}checked{% endif %}> 予約可</label>
            <label><input type="radio" name="reservable" value="0" {% if not store.reservable %}checked{% endif %}> 予約不可</label>
          </div>
        </div>

        <div class="row">
          <div class="label">編集可能</div>
          <div class="value">
            <label><input type="radio" name="editable" value="1" {% if store.editable %}checked{% endif %}> 可</label>
            <label><input type="radio" name="editable" value="0" {% if not store.editable %}checked{% endif %}> 不可</label>
          </div>
        </div>
      </div>

      <div class="notice">
        ※この画面は Store にある項目だけ保存します。<br>
        カナ/ジャンル/郵便番号/支払い方法なども保存したい場合は、保存先（モデル）を増やす必要があります。
      </div>

      <div class="actions">
        <button type="button" class="btn" onclick="history.back();">戻る</button>
        <button type="submit" class="btn btn-green">入力内容を保存する</button>
      </div>
    </form>
  </div>
</body>
</html>

{% endblock %}

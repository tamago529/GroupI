{% extends "customer_base.html" %}

{% block title %}{{ store.name }} - ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ»ã‚³ãƒ¼ã‚¹{% endblock %}

{% block css %}
<style>
    /* =========================================
       1. å…¨ä½“èƒŒæ™¯ã¨ã‚³ãƒ³ãƒ†ãƒŠè¨­å®š
       ========================================= */
    body {
        /* èƒŒæ™¯è‰²ã‚’é£Ÿã¹ãƒ­ã‚°ç‰¹æœ‰ã®ãƒ™ãƒ¼ã‚¸ãƒ¥ç³»ã«å¤‰æ›´ */
        background-color: #f3f2ed; 
        margin: 0;
        color: #333;
        font-family: "Hiragino Kaku Gothic ProN", "ãƒ¡ã‚¤ãƒªã‚ª", sans-serif;
    }

    .tabelog-wrapper {
        width: 980px;
        margin: 0 auto;
        background-color: #fff;
        padding-bottom: 50px;
        box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }

    /* ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ç”¨ï¼šè¦–è¦šçš„ã«éš ã™è¨­å®š */
    .visually-hidden {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
    }

    /* =========================================
       2. åº—èˆ—ãƒ˜ãƒƒãƒ€ãƒ¼
       ========================================= */
    .shop-header {
        padding: 20px 20px 10px;
    }

    .label-official {
        background-color: #bfa676;
        color: #fff;
        font-size: 10px;
        padding: 2px 5px;
        border-radius: 2px;
        display: inline-block;
        margin-bottom: 5px;
    }

    .shop-name-title {
        font-size: 26px;
        font-weight: bold;
        margin: 5px 0 10px 0;
    }

    .header-top-row {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
    }

    .action-group {
        display: flex;
        gap: 8px;
    }

    .btn-action-white {
        background: #fff;
        border: 1px solid #ccc;
        border-radius: 4px;
        padding: 6px 14px;
        font-size: 13px;
        font-weight: bold;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 5px;
    }
    .btn-action-white span { color: #ff66a0; }

    .btn-action-green {
        background-color: #8fb134;
        color: #fff;
        border: none;
        border-radius: 4px;
        padding: 6px 18px;
        font-size: 13px;
        font-weight: bold;
    }

    .rating-container {
        display: flex;
        align-items: center;
        gap: 12px;
        margin: 5px 0;
    }
    .stars { color: #ffa500; font-size: 18px; }
    .score-value { color: #e60000; font-size: 26px; font-weight: bold; }
    .review-count { color: #06c; font-size: 13px; text-decoration: none; }

    .meta-info-text {
        font-size: 13px;
        color: #666;
        margin-top: 10px;
    }

    /* =========================================
       3. ã‚¿ãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆãƒ¡ã‚¤ãƒ³ ï¼† ã‚µãƒ–ï¼‰
       ========================================= */
    .main-navigation {
        display: flex;
        list-style: none;
        padding: 0;
        margin: 20px 0 0;
        border-bottom: 1px solid #e2e2e2;
    }
    .main-navigation li {
        flex: 1;
        text-align: center;
        border: 1px solid #e2e2e2;
        margin-right: -1px;
        background: #fdfaf5;
    }
    .main-navigation li.active {
        background-color: #7a6e54;
        border-color: #7a6e54;
    }
    .main-navigation li.active a { color: #fff; }
    .main-navigation a { display: block; padding: 14px 0; text-decoration: none; color: #333; font-weight: bold; }

    /* ã€ä¿®æ­£ã€‘ã‚µãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼šè¦ªè¦ç´ ã„ã£ã±ã„ã«å‡ç­‰é…ç½® */
    .sub-navigation {
        display: flex;
        list-style: none;
        padding: 0;
        margin: 0;
        background-color: #f9f9f9;
        border-bottom: 2px solid #7a6e54;
        width: 100%; /* å…¨å¹…ã«åºƒã’ã‚‹ */
    }
    .sub-navigation li {
        flex: 1; /* å„è¦ç´ ã‚’å‡ç­‰ãªå¹…ã«ã™ã‚‹ */
        text-align: center; /* ãƒ†ã‚­ã‚¹ãƒˆã‚’ä¸­å¤®å¯„ã› */
        padding: 12px 0;
        font-size: 12px;
        color: #666;
        border-right: 1px solid #eee;
        cursor: pointer;
    }
    .sub-navigation li:last-child {
        border-right: none;
    }
    .sub-navigation li.active {
        background-color: #fff;
        color: #333;
        font-weight: bold;
        border-bottom: 2px solid #ff9900;
        margin-bottom: -2px; /* ä¸‹ç·šã‚’ãƒ¡ã‚¤ãƒ³ã®ç·šã¨é‡ã­ã‚‹ */
    }

    /* =========================================
       4. ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é…ç½®ï¼ˆ2ã‚«ãƒ©ãƒ ï¼‰
       ========================================= */
    .content-layout {
        display: flex;
        padding: 20px;
    }
    .left-column { width: 660px; }
    .right-column { width: 260px; margin-left: 40px; }

    .section-head {
        border-left: 4px solid #f90;
        padding-left: 10px;
        font-size: 18px;
        margin: 20px 0;
        font-weight: bold;
    }

    /* æ–™ç†ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ  */
    .menu-item-box {
        display: flex;
        justify-content: space-between;
        padding: 20px 0;
        border-bottom: 1px dotted #ccc;
    }
    .menu-item-left { display: flex; gap: 15px; }
    .menu-photo-frame { width: 120px; height: 120px; background: #f0f0f0; flex-shrink: 0; }
    
    /* ã€æ”¹å–„ã€‘ç”»åƒå±æ€§ã‚’è£œå®Œã™ã‚‹ã‚¹ã‚¿ã‚¤ãƒ« */
    .menu-photo-frame img { 
        width: 100%; 
        height: 100%; 
        object-fit: cover; 
    }
    
    .menu-name-link { color: #06c; font-weight: bold; font-size: 15px; margin: 0; }
    .menu-item-price { color: #e60000; font-weight: bold; font-size: 16px; }

    /* åŸºæœ¬æƒ…å ±ãƒ†ãƒ¼ãƒ–ãƒ« */
    .info-table-tabelog {
        width: 100%;
        border-collapse: collapse;
        border: 1px solid #e2e2e2;
        font-size: 13px;
    }
    .info-table-tabelog th { background: #fafafa; border: 1px solid #e2e2e2; padding: 12px; text-align: left; width: 120px; }
    .info-table-tabelog td { border: 1px solid #e2e2e2; padding: 12px; }

    /* ã‚µã‚¤ãƒ‰ãƒãƒ¼äºˆç´„ */
    .sidebar-reserve-card { border: 1px solid #e2e2e2; padding: 20px; background: #fff; text-align: center; }
    .btn-reserve-orange {
        display: block;
        background-color: #ff6600;
        color: #fff;
        padding: 14px;
        text-decoration: none;
        font-weight: bold;
        border-radius: 4px;
        margin-top: 10px;


        .modal-overlay {
        display: none; /* åˆæœŸã¯éè¡¨ç¤º */
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.6);
        z-index: 1000;
        justify-content: center;
        align-items: center;
    }
    .modal-box {
        background: #fff;
        width: 450px;
        padding: 30px;
        border-radius: 8px;
        position: relative;
        text-align: center;
    }
    .modal-close {
        position: absolute;
        top: 10px; right: 15px;
        font-size: 24px;
        cursor: pointer;
        color: #999;
    }
    .modal-title {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 20px;
        color: #333;
    }
    .reserve-option-btn {
        display: block;
        width: 100%;
        padding: 15px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        background: #f9f9f9;
        text-decoration: none;
        color: #333;
        font-weight: bold;
        transition: 0.2s;
    }
    .reserve-option-btn:hover {
        background: #fff4e6;
        border-color: #ff6600;
    }
    }
</style>
{% endblock %}

{% block content %}
<div class="tabelog-wrapper">
    <header class="shop-header">
        <span class="label-official">å…¬å¼</span>
        <div class="header-top-row">
            <!-- ğŸŒŸ åº—åã‚’å‹•çš„ã«å¤‰æ›´ -->
            <h1 class="shop-name-title">{{ store.store_name }} {{ store.branch_name }}</h1>
            <div class="action-group">
                <button class="btn-action-white"><span>ğŸ“</span>è¡Œã£ãŸ</button>
                <button class="btn-action-white"><span>ğŸ”–</span>ä¿å­˜</button>
                <button class="btn-action-green">æŠ•ç¨¿ â–¼</button>
            </div>
        </div>

        <div class="rating-container">
            <span class="stars">â˜…â˜…â˜…â˜†â˜†</span>
            <span class="score-value">3.00</span>
            <a href="{% url 'reviews:customer_review_list' %}" class="review-count">å£ã‚³ãƒŸã‚’è¡¨ç¤º</a>
        </div>

        <div class="meta-info-text">
            ã‚¸ãƒ£ãƒ³ãƒ«ï¼š{{ store.scene.scene_name }}<br>
            äºˆç®—ï¼š â˜€ï¸ ï¿¥{{ store.budget }}ã€œ
        </div>
    </header>

    <!-- ğŸŒŸ ã‚¿ãƒ–ãƒªãƒ³ã‚¯ã« store.pk ã‚’è¿½åŠ  -->
    <ul class="main-navigation">
        <li><a href="{% url 'stores:customer_store_info' store.pk %}">ãƒˆãƒƒãƒ—</a></li>
        <li class="active"><a href="{% url 'stores:customer_menu_course' store.pk %}">ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ»ã‚³ãƒ¼ã‚¹</a></li>
        <li><a href="#">å†™çœŸ</a></li>
        <li><a href="{% url 'reviews:customer_review_list' %}">å£ã‚³ãƒŸ</a></li>
        <li><a href="{% url 'stores:customer_map' %}">åœ°å›³</a></li>
    </ul>

    <ul class="sub-navigation">
        <li>ã‚³ãƒ¼ã‚¹ (0)</li>
        <!-- ğŸŒŸ å®Ÿéš›ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ•°ã‚’è¡¨ç¤º -->
        <li class="active">æ–™ç† ({{ menu_items.count }})</li>
        <li>ãƒ‰ãƒªãƒ³ã‚¯ (0)</li>
        <li>ãƒ©ãƒ³ãƒ (0)</li>
        <li>å†™çœŸ</li>
    </ul>

    <div class="content-layout">
        <main class="left-column">
            <h2 class="section-head">æ–™ç†ãƒ¡ãƒ‹ãƒ¥ãƒ¼</h2>
            
            <!-- ğŸŒŸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å–å¾—ã—ãŸãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ãƒ«ãƒ¼ãƒ—ã§å›ã™ -->
            {% for item in menu_items %}
            <article class="menu-item-box">
                <div class="menu-item-left">
                    <div class="menu-photo-frame">
                        <!-- ğŸŒŸ ç”»åƒãŒã‚ã‚Œã°è¡¨ç¤ºï¼ˆimage_pathãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æƒ³å®šï¼‰ -->
                        {% if item.image_path %}
                            <img src="{{ item.image_path }}" alt="{{ item.menu_name }}">
                        {% endif %}
                    </div>
                    <div>
                        <!-- ğŸŒŸ ãƒ¡ãƒ‹ãƒ¥ãƒ¼å -->
                        <h3 class="menu-name-link">{{ item.menu_name }}</h3>
                        <p style="font-size: 12px; color: #666; margin-top: 8px;">ç¾å‘³ã—ã„å­£ç¯€ã®æ–™ç†ã‚’ã”å ªèƒ½ãã ã•ã„ã€‚</p>
                    </div>
                </div>
                <!-- ğŸŒŸ ä¾¡æ ¼ -->
                <div class="menu-item-price">{{ item.price }}å††</div>
            </article>
            {% empty %}
                <p>ç¾åœ¨ã€ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            {% endfor %}

            <h2 class="section-head">åº—èˆ—åŸºæœ¬æƒ…å ±</h2>
            <table class="info-table-tabelog">
                <caption class="visually-hidden">{{ store.store_name }} ã®è©³ç´°æƒ…å ±ãƒ†ãƒ¼ãƒ–ãƒ«</caption>
                <tbody>
                    <tr>
                        <th scope="row">åº—å</th>
                        <td>{{ store.store_name }} {{ store.branch_name }}</td>
                    </tr>
                    <tr>
                        <th scope="row">ä½æ‰€</th>
                        <td>{{ store.address }}</td>
                    </tr>
                </tbody>
            </table>
        </main>

        
    </div>
</div>
{% endblock %}

<a href = "{% url 'reservations:store_reservation_register' %}">ãƒãƒƒãƒˆäºˆç´„ç™»éŒ²ç”»é¢ã¸ç§»å‹•</a>
<a href = "{% url 'stores:customer_map' %}">åº—èˆ—åŸºæœ¬æƒ…å ±ï¼ˆé¡§å®¢ï¼‰ç”»é¢ã¸ç§»å‹•</a>

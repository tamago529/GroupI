{% extends "customer_base.html" %}

{% block title %}å£ã‚³ãƒŸä¸€è¦§ - {{ shop.name }}{% endblock %}

{% block css %}
<style>
    /* --- 1. å…¨ä½“ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ --- */
    .shop-container {
        max-width: 980px;
        margin: 20px auto;
        font-family: "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
        color: #333;
        line-height: 1.6;
    }

    /* --- 2. ãƒ˜ãƒƒãƒ€ãƒ¼ï¼šå…¬å¼ãƒãƒƒã‚¸ãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ --- */
    .header-upper-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
    }

    .official-label {
        background-color: #bfa67b;
        color: #fff;
        padding: 2px 8px;
        font-size: 12px;
        border-radius: 2px;
        font-weight: bold;
    }

    .action-buttons {
        display: flex;
        gap: 8px;
    }

    .btn-action {
        border: 1px solid #ccc;
        background: #fff;
        padding: 6px 14px;
        font-size: 13px;
        border-radius: 4px;
        cursor: pointer;
    }

    .btn-post {
        background-color: #93c02d;
        color: #fff;
        border: none;
        font-weight: bold;
    }

    /* --- 3. åº—èˆ—ãƒ¡ã‚¤ãƒ³æƒ…å ±ï¼ˆåº—åãƒ»è©•ä¾¡ï¼‰ --- */
    .shop-main-info {
        margin-bottom: 20px;
    }

    .catchphrase {
        font-size: 13px;
        color: #666;
        margin-bottom: 5px;
    }

    .shop-title {
        font-size: 26px;
        font-weight: bold;
        margin: 0 0 10px 0;
    }

    .rating-flex {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .star-rating {
        position: relative;
        display: inline-block;
        font-size: 22px;
        line-height: 1;
    }

    .star-rating-back { color: #ccc; }
    .star-rating-front {
        position: absolute;
        top: 0; left: 0;
        overflow: hidden;
        white-space: nowrap;
        color: #ff9800;
        width: var(--rating-percent, 0%);
    }

    .score-red {
        font-size: 28px;
        font-weight: bold;
        color: #e60012;
    }

    /* --- 4. ã‚¹ãƒšãƒƒã‚¯æƒ…å ±ï¼ˆèµ¤ã„å¢ƒç•Œç·šï¼‰ --- */

    .spec-row {
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
    }

    .spec-item { margin-bottom: 5px; }
    .spec-label { color: #666; width: 80px; display: inline-block; }

    .detail-link {
        color: #06c;
        text-decoration: none;
        font-size: 11px;
    }

    /* --- 5. ã‚¿ãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ --- */
    .shop-tabs {
        display: flex;
        border: 1px solid #ddd;
        background-color: #fff;
        margin-bottom: 20px;
    }

    .tab-item {
        flex: 1;
        text-align: center;
        padding: 15px 0;
        border-right: 1px solid #ddd;
        font-size: 15px;
        font-weight: bold;
        text-decoration: none;
        color: #333;
    }

    .tab-item:last-child { border-right: none; }
    .tab-item.active {
        background-color: #8c8366;
        color: #fff;
    }

    /* --- 6. å£ã‚³ãƒŸæ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ã‚¨ãƒªã‚¢ --- */
    .review-filter-section {
        background-color: #f9f9f7;
        padding: 20px;
        border: 1px solid #ddd;
        margin-bottom: 20px;
    }

    .search-box-container {
        display: flex;
        align-items: center;
        gap: 10px;
        background: #fff;
        padding: 15px;
        border: 1px solid #ccc;
        margin-bottom: 20px;
    }

    .search-input {
        flex: 1;
        padding: 8px;
        border: 1px solid #ccc;
    }

    .search-button {
        background-color: #93c02d;
        color: #fff;
        border: none;
        padding: 8px 25px;
        font-weight: bold;
        cursor: pointer;
    }

    .filter-tabs {
        display: flex;
        border-bottom: 1px solid #ddd;
        margin-bottom: 15px;
    }

    .filter-tab-item {
        flex: 1;
        text-align: center;
        padding: 12px;
        background: #fff;
        border: 1px solid #ddd;
        border-bottom: none;
        font-size: 14px;
        text-decoration: none;
        color: #333;
    }

    .filter-tab-item.active {
        border-top: 2px solid #ff9800;
        color: #ff9800;
        font-weight: bold;
    }

    /* --- 7. ä¸¦ã³æ›¿ãˆãƒ»ä»¶æ•°è¡¨ç¤º --- */
    .list-header-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 12px;
        color: #666;
        padding: 10px 0;
        border-bottom: 1px solid #eee;
    }

    /* --- 8. å£ã‚³ãƒŸã‚«ãƒ¼ãƒ‰ --- */
    .review-card {
        border: 1px solid #ddd;
        padding: 20px;
        border-radius: 8px;
        background-color: #fff;
        margin-bottom: 20px;
    }

    .review-user-info {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 15px;
    }

    .user-avatar { border-radius: 50%; object-fit: cover; }
    .review-title { font-weight: bold; font-size: 17px; margin: 12px 0; }
</style>
{% endblock %}

{% block content %}
<article class="shop-container">

    <div class="header-upper-row">
        <div><span class="official-label">å…¬å¼</span></div>
        <div class="action-buttons">
            <button class="btn-action">è¡Œã£ãŸ</button>
            <button class="btn-action">ä¿å­˜</button>
            <button class="btn-action btn-post">æŠ•ç¨¿</button>
        </div>
    </div>

    <div class="shop-main-info">
        <p class="catchphrase">{{ shop.catchphrase|default:"ç„¼è‚‰ã¨å¤šå›½ç±æ–™ç†ã‚’æº€å–«ï¼ç„¼é…ã‚«ã‚¯ãƒ†ãƒ«ã‚‚â—" }}</p>
        <h1 class="shop-title">{{ shop.name|default:"ç„¼è‚‰ã‚·ãƒ§ãƒƒãƒ—ã¾ã‚“ã¡ã„2 å­¦èŠ¸å¤§å­¦" }}</h1>

        <div class="rating-flex">
            <div class="star-rating" style="--rating-percent: {% widthratio shop.rating|default:3.07 5 100 %}%">
                <div class="star-rating-front">â˜…â˜…â˜…â˜…â˜…</div>
                <div class="star-rating-back">â˜…â˜…â˜…â˜…â˜…</div>
            </div>
            <span class="score-red">{{ shop.rating|default:3.07 }}</span>
            <span style="color: #06c; font-size: 13px;">{{ shop.review_count|default:13 }}äºº</span>
            <span style="color: #666; font-size: 13px;">{{ shop.save_count|default:903 }}äºº</span>
        </div>
    </div>

    <div class="shop-specs">
        <div class="spec-item">
            <span class="spec-label">æœ€å¯„ã‚Šé§…ï¼š</span>
            <span>{{ shop.station|default:"å­¦èŠ¸å¤§å­¦é§…" }} [{{ shop.area|default:"æ±äº¬" }}]</span>
        </div>
        <div class="spec-item">
            <span class="spec-label">ã‚¸ãƒ£ãƒ³ãƒ«ï¼š</span>
            <span>{{ shop.genres|join:"ã€"|default:"ç„¼è‚‰ã€ãƒ›ãƒ«ãƒ¢ãƒ³ã€å†·éºº" }}</span>
        </div>
        <div class="spec-row">
            <div>
                <span class="spec-label">äºˆç®—ï¼š</span>
                <span>å¤œï¼š{{ shop.budget_night|default:"ï¿¥5,000ï½ï¿¥5,999" }} / æ˜¼ï¼š{{ shop.budget_day|default:"-" }}</span>
            </div>
            <a href="#" class="detail-link">åº—èˆ—æƒ…å ±ï¼ˆè©³ç´°ï¼‰</a>
        </div>
    </div>

    <nav class="shop-tabs">
        <a href="#" class="tab-item">ãƒˆãƒƒãƒ—</a>
        <a href="#" class="tab-item">åº§å¸­</a>
        <a href="#" class="tab-item">ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ»ã‚³ãƒ¼ã‚¹</a>
        <a href="#" class="tab-item">å†™çœŸ <span class="count-badge">87</span></a>
        <a href="#" class="tab-item active">å£ã‚³ãƒŸ <span class="count-badge">13</span></a>
        <a href="#" class="tab-item" style="color: #e60012;">ã‚¯ãƒ¼ãƒãƒ³ãƒ»åœ°å›³</a>
    </nav>

    <section class="review-filter-section">
        <div class="search-box-container">
            <label for="review-search" class="search-label">å£ã‚³ãƒŸæ¤œç´¢</label>
            <input type="text" id="review-search" class="search-input" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰">
            <button class="search-button">æ¤œç´¢</button>
        </div>

        <div class="filter-tabs">
            <a href="#" class="filter-tab-item active">ğŸ’¬ ã™ã¹ã¦ã®å£ã‚³ãƒŸ</a>
            <a href="#" class="filter-tab-item">ğŸŒ™ å¤œã®å£ã‚³ãƒŸ</a>
            <a href="#" class="filter-tab-item">â˜€ï¸ æ˜¼ã®å£ã‚³ãƒŸ</a>
        </div>

        <div class="sort-bar">
            <div class="sort-links">
                <span class="current-sort">æ¨™æº–</span>
                <a href="#" style="color: #06c; text-decoration: none; margin-left:10px;">è¨ªå•æœˆé †</a>
                <a href="#" style="color: #06c; text-decoration: none; margin-left:10px;">ã„ã„ã­ï¼é †</a>
            </div>
            
            <div class="list-header-info">
                <div><strong>1ï½20</strong> ä»¶ã‚’è¡¨ç¤º ï¼ å…¨ <strong>{{ shop.review_count|default:306 }}</strong> ä»¶</div>
                <div>
                    <label for="display-count" style="font-size: 12px;">è¡¨ç¤ºä»¶æ•°ï¼š</label>
                    <select id="display-count" name="per_page" style="font-size: 12px;">
                        <option value="20">20</option>
                        <option value="50">50</option>
                        <option value="100">100</option>
                    </select> ä»¶
                </div>
            </div>
        </div>
    </section>

    <section class="review-section">
        <div id="review-container">
            <article class="review-card">
                <div class="review-user-info">
                    <img src="https://via.placeholder.com/40" alt="ãƒ¦ãƒ¼ã‚¶ãƒ¼" width="40" height="40" class="user-avatar">
                    <div>
                        <div style="font-weight: bold;">{{ review.user_name|default:"å¤§å­¦ç”Ÿã®è´…æ²¢" }}</div>
                        <div style="font-size: 12px; color: #666;">å£ã‚³ãƒŸ363ä»¶ | ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼3485äºº</div>
                    </div>
                </div>
                <div style="color: #ffc107;">
                    â˜…â˜…â˜…â˜…â˜… <span style="color: #e60012; font-weight: bold;">{{ review.rating|default:"3.5" }}</span>
                </div>
                <p class="review-title">{{ review.title|default:"ã€Œèˆè¸Šã‚‹ç‰›ã‚¿ãƒ³ ï½å‡ºæ±ãŒå¥ã§ã‚‹ä¸€æœŸä¸€ä¼šã®ã‚·ãƒ³ãƒ•ã‚©ãƒ‹ãƒ¼ï½ã€" }}</p>
                <p style="font-size: 14px; line-height: 1.6;">{{ review.content|default:"è·äººã®æ‰‹ä»•äº‹ã«ã‚ˆã‚‹é€æ˜æ„Ÿã®ã‚ã‚‹è–„ã•ã«ã€æ€ã‚ãšè¦‹ã¨ã‚Œã¦ã—ã¾ã†ã€‚..." }}</p>
                <a href="#" style="color: #06c; text-decoration: none; font-size: 14px;">ã‚‚ã£ã¨è¦‹ã‚‹ âˆ¨</a>
            </article>
        </div>
    </section>

</article>
{% endblock %}
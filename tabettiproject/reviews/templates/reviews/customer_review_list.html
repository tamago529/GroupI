{% extends "customer_base.html" %}

{% block title %}å£ã‚³ãƒŸä¸€è¦§ - {{ shop.store_name }}{% endblock %}

{% block css %}
<style>
/* ===============================
   ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸€è¦§ãƒšãƒ¼ã‚¸å°‚ç”¨
================================ */
.shop-main{
  max-width:1000px;
  margin:0 auto;
  background:#fff;
  border:1px solid #e6e6e6;
  color:#333;
  font-family:"Hiragino Kaku Gothic ProN","ãƒ¡ã‚¤ãƒªã‚ª",sans-serif;
}

/* ---- ãƒ¬ãƒ“ãƒ¥ãƒ¼éƒ¨åˆ†ãƒ©ãƒƒãƒ‘ ---- */
.review-wrapper{
  padding: 20px;
  margin:0 auto 40px;
}

/* ---------- æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ ---------- */
.review-filter{
  background:#f9f9f7;
  border:1px solid #ddd;
  padding:20px;
  margin-bottom:20px;
}

.review-search{
  display:flex;
  gap:10px;
  margin-bottom:16px;
}

.review-search input{
  flex:1;
  padding:8px;
  border:1px solid #ccc;
  border-radius:4px;
}

.review-search button{
  background:#8fb134;
  color:#fff;
  border:none;
  padding:8px 24px;
  border-radius:4px;
  font-weight:bold;
  cursor:pointer;
}

/* ---------- ä»¶æ•° ---------- */
.review-count-row{
  font-size:12px;
  color:#666;
  margin-bottom:12px;
}

/* ---------- ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚«ãƒ¼ãƒ‰ ---------- */
.review-card{
  background:#fff;
  border:1px solid #ddd;
  border-radius:8px;
  padding:20px;
  margin-bottom:20px;
}

.review-user{
  display:flex;
  align-items:center;
  gap:12px;
  margin-bottom:12px;
}

.review-avatar{
  width:40px;
  height:40px;
  border-radius:50%;
  background:#ddd;
}

.review-user-name{
  font-weight:bold;
}

.review-date{
  font-size:12px;
  color:#666;
}

/* --- ç‚¹æ•°è¡¨ç¤º --- */
.review-score{
  display:flex;
  align-items:center;
  gap:10px;
  margin-bottom:10px;
}
.review-score .value{
  font-weight:bold;
  color:#e60012;
}

/* --- æœ¬æ–‡ --- */
.review-text{
  font-size:14px;
  line-height:1.7;
}

/* ---------- é€šå ± ---------- */
.report-wrap{
  text-align:right;
  margin-top:10px;
}

.report-link{
  font-size:12px;
  color:#999;
  text-decoration:none;
}
.report-link:hover{
  color:#d9534f;
  text-decoration:underline;
}
</style>
{% endblock %}

{% block content %}
<div class="shop-main">


  {% include "stores/_customer_store_common.html" with store=store is_saved=is_saved star_states=star_states avg_rating=avg_rating review_count=review_count active_main="reviews" active_sub="top" %}


  <div class="review-wrapper">


    <section class="review-filter">
      <div class="review-search">
        <input type="text" placeholder="å£ã‚³ãƒŸã‚’æ¤œç´¢ï¼ˆæœªå®Ÿè£…ï¼‰">
        <button type="button">æ¤œç´¢</button>
      </div>

      <div class="review-count-row">
        å…¨ <strong>{{ reviews.count }}</strong> ä»¶ã®å£ã‚³ãƒŸ
      </div>
    </section>


    {% for review in reviews %}
      <article class="review-card">

        <div class="review-user">
          <div class="review-avatar"></div>
          <div>
            <div class="review-user-name">
              {{ review.reviewer.nickname }} ã•ã‚“
            </div>
            <div class="review-date">
              æŠ•ç¨¿æ—¥ï¼š{{ review.posted_at|date:"Y/m/d" }}
            </div>
          </div>
        </div>

        <div class="review-score">
          <div class="value">{{ review.score|floatformat:1 }}</div>
          <div>/ 5.0</div>
        </div>

        <div class="review-text">
          {{ review.review_text|linebreaksbr }}
        </div>

        <div class="report-wrap">
          <a href="{% url 'reviews:customer_report_input' %}?review_id={{ review.pk }}"
             class="report-link">
            ğŸš© ã“ã®å£ã‚³ãƒŸã‚’é€šå ±ã™ã‚‹
          </a>
        </div>

      </article>
    {% empty %}
      <p style="text-align:center; color:#999; padding:40px;">
        ã¾ã å£ã‚³ãƒŸã¯æŠ•ç¨¿ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
      </p>
    {% endfor %}

  </div>
</div>
{% endblock %}
